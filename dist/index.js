!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("whatwg-fetch")):"function"==typeof define&&define.amd?define(["whatwg-fetch"],e):t._fetch=e()}(this,function(){"use strict";var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e={headers:new Headers({"Content-Type":"application/json"}),mode:"same-origin",credentials:"include",cache:"reload",redirect:"follow",referrer:"client",timeout:3e4},n=function(t){return t.json().catch(function(t){throw new Error("JSON Parse Error: "+t)})},r=function(t){if(t.status>=200&&t.status<300||304==t.status)return t;throw new Error(t.statusText)},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("[object Object]"!==Object.prototype.toString.call(e)||0===Object.keys(e).length)return t;var n=[];for(var r in e)n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t+(-1===t.indexOf("?")?"?":"")+n.join("&")},i=function(t){return"function"==typeof e.fetchSuccess&&e.fetchSuccess(t),t},c=function(t){throw"function"==typeof e.fetchError&&e.fetchError(t),t=t instanceof Error?t:new Error(t)},u=function(t,e){return new Promise(function(n,r){var o=0,i=new Request(t,e);o=setTimeout(function(){var n=new Error(t+" timeout");n.fetchOption=e,r(n)},e.timeout),"function"==typeof e.fetchStart&&e.fetchStart(),fetch(i).then(function(t){clearTimeout(o),t.fetchOption=e,n(t)},function(t){clearTimeout(o),t.fetchOption=e,r(t)})}).then(r)};return{setOptions:function(n){e=t({},e,n)},getJSONP:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="jsonp"+ +new Date,i=document.createElement("script");e[n.callbackName||"_callback"]=r;var c=o(t,e),u=document.head||document.querySelector("head")||document.documentElement;return i.setAttribute("src",c),i.setAttribute("charset","utf-8"),i.setAttribute("defer",!0),i.setAttribute("async",!0),u.insertBefore(i,u.firstChild),new Promise(function(t,e){window[r]=function(e){t(e),u.removeChild(i)},i.onerror=function(){e(),u.removeChild(i)}})},getJSON:function(r){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t({},e,{method:"GET"},h),s=o(r,f);return u(s,a).then(n).then(i,c)},postJSON:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=t({},e,{method:"POST",body:JSON.stringify(o)},f);return u(r,h).then(n).then(i,c)},putJSON:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=t({},e,{method:"PUT",body:JSON.stringify(o)},f);return u(r,h).then(n).then(i,c)},deleteJSON:function(r){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t({},e,{method:"DELETE"},h),s=o(r,f);return u(s,a).then(n).then(i,c)}}});
